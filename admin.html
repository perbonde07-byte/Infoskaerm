<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin • Infoskærm</title>
  <style>
    :root{ --bg:#0b1220; --fg:#e8eefb; --muted:#9fb2d1; --acc:#5aa2ff; --card:#10172b }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{ margin:0; background:#0b1220; color:var(--fg); font:15px/1.5 system-ui,-apple-system,"Segoe UI",Roboto; }
    .wrap{ max-width:1100px; margin:30px auto; padding:0 16px }
    h1{ margin:10px 0 24px; font-size:22px }
    .grid{ display:grid; gap:14px }
    .card{ background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:16px }
    label{ display:block; font-weight:600; margin-bottom:6px }
    input[type="text"], textarea, select{
      width:100%; background:#0f1630; color:var(--fg); border:1px solid rgba(255,255,255,.12);
      border-radius:10px; padding:10px 12px; outline:none;
    }
    textarea{ min-height:90px }
    .row{ display:grid; grid-template-columns:1fr auto; gap:10px; align-items:end }
    button{
      background:var(--acc); border:0; color:#00172e; font-weight:700; padding:10px 14px; border-radius:10px; cursor:pointer;
    }
    .hint{ color:var(--muted); font-size:13px; margin-top:6px }
    table{ width:100%; border-collapse:collapse; margin-top:12px; }
    th,td{ padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.08) }
    .right{ text-align:right }
    .danger{ background:#e35d6a; color:#120207 }
    .ghost{ background:transparent; border:1px solid rgba(255,255,255,.25); color:var(--fg) }
    .flex{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
    .ok{ color:#74e39d }
    .err{ color:#ff8a8a }
    #gate{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:#0b1220; }
  </style>
</head>
<body>
<div id="gate"></div>

<div class="wrap">
  <h1>Admin • Infoskærm</h1>

  <div class="card grid">
    <div>
      <label for="dataUrl">Adresse til <code>data.json</code></label>
      <div class="row">
        <input id="dataUrl" type="text" value="https://perbonde07-byte.github.io/Infoskaerm/data.json" />
        <div class="flex">
          <button id="loadBtn" class="ghost">Hent data</button>
          <button id="downloadBtn" class="ghost">Download ny data.json</button>
          <button id="saveBtn">Gem til server</button>
        </div>
      </div>
      <div id="status" class="hint">Klar</div>
    </div>
  </div>

  <div class="card grid">
    <h3 style="margin:0">Slides</h3>

    <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:12px">
      <div>
        <label for="s_type">Type</label>
        <select id="s_type">
          <option value="bullets">bullets (punktliste)</option>
          <option value="image">image (fuldskærmsbillede)</option>
        </select>
      </div>
      <div>
        <label for="s_title">Titel</label>
        <input id="s_title" type="text" placeholder="Titel…" />
      </div>
    </div>

    <div>
      <label for="s_lines">Linjer (brug | til flere)</label>
      <textarea id="s_lines" placeholder="Punkt 1 | Punkt 2 | Punkt 3"></textarea>
    </div>

    <div class="grid" style="grid-template-columns:1fr auto; gap:12px">
      <div>
        <label for="s_image">Billede (URL eller upload)</label>
        <input id="s_image" type="text" placeholder="https://… (eller vælg fra liste)" />
      </div>
      <div class="flex">
        <input type="file" id="filePicker" accept="image/*" />
        <button id="uploadBtn" class="ghost">Upload billede</button>
      </div>
    </div>

    <div class="grid" style="grid-template-columns:1fr 200px; gap:12px">
      <div>
        <select id="mediaList"><option value="">— vælg uploadet fil —</option></select>
      </div>
      <button id="fetchMedia" class="ghost">Hent medieliste</button>
    </div>

    <div class="grid" style="grid-template-columns:240px 1fr; gap:12px; align-items:end">
      <div>
        <label for="s_duration">Varighed (sek.)</label>
        <input id="s_duration" type="text" value="12" />
      </div>
      <div class="flex">
        <button id="addSlide">Tilføj slide</button>
        <button id="clearSlides" class="ghost">Tøm alle slides</button>
      </div>
    </div>

    <table id="slidesTable">
      <thead><tr><th>#</th><th>Type</th><th>Titel</th><th>Forhåndsvisning</th><th class="right">Handling</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
/* ---------- Gate (admin-pin) ---------- */
const ADMIN_KEY = "0705";
(function gate(){
  const p = new URLSearchParams(location.search).get('admin');
  if(p===ADMIN_KEY){ localStorage.setItem('admin_ok','1'); }
 
